"use strict";(self.webpackChunksnow_white_ui=self.webpackChunksnow_white_ui||[]).push([[110],{"./src/stories/infinityScroll/InfinityScroll.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>InfinityScroll_stories});var react=__webpack_require__("./node_modules/react/index.js");const infinityscroll_module_scroll_wrap="infinityscroll_scroll_wrap__aNrd+";var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const InfinityScroll=_ref=>{let{setIndex,data,viewCount,type="observer"}=_ref;console.log("받은 데이터",data);const loaderRef=(0,react.useRef)(null),[isLoading,setIsLoading]=(0,react.useState)(!1),[canLoad,setCanLoad]=(0,react.useState)(!0),[items,setItems]=(0,react.useState)([]);return(0,react.useEffect)((()=>{const observer=new IntersectionObserver((entries=>{entries[0].isIntersecting&&canLoad&&!isLoading&&(setIsLoading(!0),setCanLoad(!1),setIndex((prevIndex=>prevIndex+1)),setTimeout((()=>{setCanLoad(!0)}),2e3))}),{root:null,rootMargin:"0px",threshold:1});return loaderRef.current&&observer.observe(loaderRef.current),()=>{loaderRef.current&&observer.unobserve(loaderRef.current)}}),[isLoading,setIndex,canLoad]),(0,react.useEffect)((()=>{data&&data.length>0&&(setIsLoading(!1),setItems((prevItems=>[...prevItems,...data])))}),[data]),(0,jsx_runtime.jsxs)("div",{className:infinityscroll_module_scroll_wrap,children:[items.map(((item,index)=>(0,jsx_runtime.jsxs)("div",{style:{padding:"20px",border:"1px solid #ddd",margin:"10px 0"},children:[index,"번 ",item.title]},index))),(0,jsx_runtime.jsx)("div",{ref:loaderRef,children:isLoading&&(0,jsx_runtime.jsx)("div",{children:"Loading..."})})]})},infinityScroll_InfinityScroll=InfinityScroll;try{InfinityScroll.displayName="InfinityScroll",InfinityScroll.__docgenInfo={description:"",displayName:"InfinityScroll",props:{setIndex:{defaultValue:null,description:"",name:"setIndex",required:!0,type:{name:"(index: any) => void"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},viewCount:{defaultValue:null,description:"",name:"viewCount",required:!1,type:{name:"number"}},type:{defaultValue:{value:"observer"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"observer"'},{value:'"query"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/infinityScroll/InfinityScroll.tsx#InfinityScroll"]={docgenInfo:InfinityScroll.__docgenInfo,name:"InfinityScroll",path:"src/stories/infinityScroll/InfinityScroll.tsx#InfinityScroll"})}catch(__react_docgen_typescript_loader_error){}var axios=__webpack_require__("./node_modules/axios/lib/axios.js");const InfinityScroll_stories={title:"Component/InfinityScroll",component:infinityScroll_InfinityScroll,parameters:{},tags:["autodocs"],argTypes:{}},Basic={args:{},render:function Render(args){const[index,setindex]=(0,react.useState)(1),[data,setData]=(0,react.useState)([]);return(0,react.useEffect)((()=>{console.log("dindex",index),axios.Z.get("https://jsonplaceholder.typicode.com/photos?_page=".concat(index,"&_limit=").concat(10)).then((res=>{setData(res.data),console.log("data:",res.data)}))}),[index]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(infinityScroll_InfinityScroll,{setIndex:setindex,data,viewCount:10})})}};Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"{\n  args: {\n    // pageNumber: 1\n  },\n  render: function Render(args) {\n    const [index, setindex] = useState(1);\n    const [data, setData] = useState([]);\n    const viewCount = 10;\n    useEffect(() => {\n      console.log('dindex', index);\n      axios.get(`https://jsonplaceholder.typicode.com/photos?_page=${index}&_limit=${viewCount}`).then((res: any) => {\n        setData(res.data);\n        console.log('data:', res.data);\n      });\n    }, [index]);\n    return <>\r\n        <InfinityScroll setIndex={setindex} data={data} viewCount={viewCount} />\r\n      </>;\n  }\n}",...Basic.parameters?.docs?.source}}};const __namedExportsOrder=["Basic"]}}]);